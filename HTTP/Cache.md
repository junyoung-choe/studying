# Cache
캐시는 보통 유저의 Hdd 에 저장되어 있다 

파일을 서버로 부터 받아올때  

- 캐시가 없을때  
파일(데이터)의 변경이 없더라도 계속해서 네트워크를 통해서 데이터를 다운로드 받아야 한다  
인터넷 네트워크는 매우 느리고 비싸다  
브라우저 로딩 속도는 느리다  

브라우저에 캐시 저장소가 존재하고 서버로부터의 데이터를 담아 놓을수 있다 

서버에서 데이터를 응답해줄때 캐시의 유효 시간 설정이 가능하다  

따라서 캐시 저장소에 존재하는 파일들은 서버에 요청하지 않고 캐시 저장소에서 가져온다

- 캐시가 있을때  
캐시 덕분에 캐시 가능 시간동안 네트워크를 사용하지 않아도 된다
비싼 네트워크 사용량을 줄일 수 있다
브라우저 로딩 속도가 매우 빠르다

캐시의 유효 시간이 만료 된다면 다시 서버에서 데이터 다운로드를 받아야 한다

- 캐시의 시간이 만료시
1. 해당 데이터가 서버에서 변경이 없을경우
시간이 다 되도 캐시 저장소에 존재하고 만약 서버에서 데이터의 변경이 없다면(서버에서 보내준 최신 시간 확인 가능) 다운로드 대신 그냥 캐시에서 데이터를 사용한다 (단 데이터가 서버와 같다는 검증은 필수가 된다)  
캐시에 저장 되어있는 해당 데이터의 last-modified 시간을 확인하고 Header 에 담아서 요청을 보낸다.  
서버에서 last-modified 시간을 확인하고 서버에서의 last-modified 도 같다면 응답시에 Not Modified 를 보내준다  
F12 에서 받아온 파일들을 확인해보면 연한 글씨들은 서버에서 가져온 것이 아닌 캐시 저장소에서 가져온 데이터이다


2. 해당 데이터가 서버에서 변경이 있을경우
새로 데이터를 다운로드 받아온다 

3. 데이터는 그대로인데 변경 시간만 달라졌다면 ?
ETag 를 이용해서 버전을 적어둘수 있다 ex ETag = "v1.0"  
서버에서 ETag 를 같이 보내주고 클라이언트에서 해당 데이터가 캐시에서 만료되고 last-Modified 의 시간이 같다고 해도  
즉 버전이 같으면 서버에서 Not Modified 를 보내준다  


캐시의 응용 -> 프록시  
미국에서 데이터를 받아온다면 ? 
한국에서 중간 중계 역할로 (프록시 서버) 캐시 서버를 만든다  
해당 캐시 서버는 사용자들의 요청을 받아서 데이터를 보내주고  
미국에 있는 원 서버에서 데이터를 받아오고 갱신하는 역할을 한다  

그래서 유튜브 같은 플렛폼이 빠르게 실행된다 ! 

프록시에서 반드시 원서버에서 캐시 확인을 하게 하는 설정 등도 존재한다 
또한 원 서버 오류시 오류보단 오래된 데이터라도 보내주자의 설계가 되어있다  

서비스는 곧 오류보다는 대안책이 좋다 !  
